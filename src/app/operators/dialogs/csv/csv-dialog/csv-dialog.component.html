<wave-dialog-header>CSV Upload</wave-dialog-header>
<md-dialog-content>
    <wave-csv-upload
        *ngIf="!data"
        [file_size_limit]="100000000"
        (onData)="data = $event"
    ></wave-csv-upload>
    <wave-csv-config
        *ngIf="!!data && !(uploading$ | async)"
        [data]="data"
        [cellSpacing]="10"
        [linesToParse]="15"
        (finish)="submit($event)"
    ></wave-csv-config>
    <md-spinner *ngIf="uploading$ | async"></md-spinner>
</md-dialog-content>
<!-- TODO: DO THIS WITH ALL THE BUTTONS! -->
<!-- Buttons -->

<md-dialog-actions align="end" *ngIf="!(uploading$ | async)">
    <div class="buttons" *ngIf="!!csvConfig">
            <span *ngIf="(csvConfig.isSpatialProperties$ | async) || (csvConfig.isTemporalProperties$ | async) || (csvConfig.isTypingProperties$ | async)">
              <button md-raised-button (click)="csvConfig.prev()">Prev</button>
            </span>
        <span *ngIf="(csvConfig.isSpatialProperties$ | async) || (csvConfig.isDataProperties$ | async) || (csvConfig.isTemporalProperties$ | async)">
                <button md-raised-button color="primary" (click)="csvConfig.next()"
                        [disabled]="!csvConfig.validHeader()
                                   || (((csvConfig.isSpatialProperties$ | async) || (csvConfig.isTemporalProperties$ | async))
                                   && ((csvConfig.xColumn$ | async) === (csvConfig.yColumn$ | async)))
                                   || csvConfig.model.header.length <= 1"
                >
                    Next
                </button>
            </span>
        <button md-raised-button color="primary" (click)="csvConfig.submit()" *ngIf="csvConfig.isTypingProperties$ | async"
                [disabled]="(csvConfig.xColumn$ | async) === (csvConfig.yColumn$ | async)
                                && ((csvConfig.model.intervalType === IntervalFormat.StartEnd || csvConfig.model.intervalType === IntervalFormat.StartDur))
                                || (csvConfig.nameIsReserved$ | async)"
        >
            Submit
        </button>
    </div>
</md-dialog-actions>
