<div class="container">
    <div class="flex-container">
        @if (addedDataset; as item) {
            <button mat-stroked-button class="browseButton" (click)="browse()">Back to all datasets</button>
        } @else {
            <mat-form-field appearance="fill">
                <mat-label>Filter by name</mat-label>
                <input matInput type="text" [(ngModel)]="searchName" (input)="onSearchChange($event)" />
            </mat-form-field>
            <button mat-raised-button color="primary" class="add-dataset" (click)="addDataset()">Add new dataset</button>
        }
    </div>
    <cdk-virtual-scroll-viewport class="bottom" [itemSize]="itemSizePx" (scrolledIndexChange)="onScrolledIndexChange($event)">
        <mat-nav-list>
            @if (addedDataset; as item) {
                <mat-list-item class="selected">
                    <h4 matListItemTitle>{{ item.displayName }} [{{ item.name }}]</h4>
                    <p matListItemLine>{{ item.description }}</p>
                </mat-list-item>
            } @else {
                <ng-container *cdkVirtualFor="let item of source; trackBy: trackById">
                    <mat-list-item [class.selected]="(selectedDataset$ | async) === item" (click)="select(item)">
                        <h4 matListItemTitle>{{ item.displayName }} [{{ item.name }}]</h4>
                        <p matListItemLine>{{ item.description }}</p>
                    </mat-list-item>
                </ng-container>
            }
        </mat-nav-list>

        <!-- <mat-spinner [diameter]="loadingSpinnerDiameterPx" *ngIf="source?.loading$ | async"></mat-spinner> -->
    </cdk-virtual-scroll-viewport>
</div>
