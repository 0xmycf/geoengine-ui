<h2 mat-dialog-title>Create new Item</h2>
<form [formGroup]="form">
    <div id="container" fxLayout="column">
        <div class="specification" fxFlex>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>Basic Information</mat-card-title>
                </mat-card-header>

                <mat-card-content>
                    <mat-button-toggle-group
                        id="item-type"
                        [multiple]="false"
                        formControlName="itemType"
                        (ngModelChange)="updateItemType()"
                    >
                        <mat-button-toggle [value]="ItemType.Collection">Collection</mat-button-toggle>
                        <mat-button-toggle [value]="ItemType.Layer">Layer</mat-button-toggle>
                    </mat-button-toggle-group>

                    <div>
                        <mat-form-field appearance="fill">
                            <mat-label>Name</mat-label>
                            <input matInput type="text" formControlName="name" />
                        </mat-form-field>
                        <mat-form-field appearance="fill">
                            <mat-label>Description</mat-label>
                            <input matInput type="text" formControlName="description" />
                        </mat-form-field>
                    </div>
                </mat-card-content>
            </mat-card>

            <mat-card *ngIf="form.controls.itemType.value === ItemType.Layer">
                <mat-card-header>
                    <mat-card-title>Workflow</mat-card-title>
                </mat-card-header>

                <mat-card-content>
                    <geoengine-code-editor formControlName="workflow"></geoengine-code-editor>
                    <mat-error *ngIf="form.controls.workflow.errors?.invalidJson"> The workflow is not a valid JSON object. </mat-error>
                    <mat-error *ngIf="form.controls.workflow.errors?.required"> The workflow must not be empty </mat-error>
                </mat-card-content>
            </mat-card>
        </div>

        <div class="actions">
            <button mat-raised-button color="primary" [disabled]="form.invalid" (click)="createItem()">Create</button>
        </div>
    </div>
</form>
