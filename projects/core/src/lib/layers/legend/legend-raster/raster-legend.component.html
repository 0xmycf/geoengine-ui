@if (selectedBands(); as bands) {
    <table>
        <thead>
            <!-- measurement -->
            <tr>
                <td colspan="3" class="measurement">
                    @if (showBandNames()) {
                        <span>
                            Bandname<span *ngIf="bands.length > 1">s</span>:
                            <i>
                                @for (band of bands; track band.name) {
                                    {{ band.name }}<span *ngIf="!$last">,</span>
                                }
                            </i>
                        </span>
                    }

                    @if (bandsHaveUnits()) {
                        Measurement<span *ngIf="bands.length > 1">s</span>:
                        @for (band of bands; track band.name) {
                            @if (band.measurement | continuousMeasurement; as measurement) {
                                <i>
                                    {{ measurement.measurement }}<span *ngIf="measurement.unit"> (in {{ measurement.unit }})</span></i
                                ><span *ngIf="!$last">, </span>
                            }
                            @if (band.measurement | classificationMeasurement; as measurement) {
                                <i>{{ measurement.measurement }}</i
                                ><span *ngIf="!$last">, </span>
                            }
                            @if (band.measurement | unitlessMeasurement; as measurement) {
                                <i>unitless</i><span *ngIf="!$last">, </span>
                            }
                        }
                    }
                </td>
            </tr>
        </thead>
        <tbody>
            <ng-template [ngIf]="layer().symbology.rasterColorizer.isContinuous()">
                <!-- data -->
                <tr *ngFor="let breakpoint of displayedBreakpoints(); let isFirst = first">
                    <td
                        class="gradient"
                        *ngIf="isFirst"
                        [rowSpan]="layer().symbology.rasterColorizer.getBreakpoints().length"
                        [style.background]="layer().symbology.rasterColorizer | geoengineRasterColorizerCssGradient: gradientAngle()"
                    ></td>
                    <td>{{ breakpoint }}</td>
                </tr>
            </ng-template>

            <ng-container *ngIf="layer().symbology.rasterColorizer.isDiscrete()">
                <ng-container *ngIf="!(bands[0].measurement | classificationMeasurement)">
                    <tr *ngFor="let breakpoint of colorizerBreakpoints()">
                        <td class="classes">
                            <div class="icon" [style.background-color]="breakpoint | breakpointToCssStringPipe"></div>
                        </td>
                        <td>{{ breakpoint.value }}</td>
                    </tr>
                </ng-container>

                <ng-container *ngIf="bands[0].measurement | classificationMeasurement as measurement">
                    <tr *ngFor="let breakpoint of colorizerBreakpoints(); let isFirst = first">
                        <td class="classes">
                            <div class="icon" [style.background-color]="breakpoint | breakpointToCssStringPipe"></div>
                        </td>
                        <td class="classes">{{ breakpoint.value }}</td>
                        <td>{{ measurement.classes[breakpoint.value] }}</td>
                    </tr>
                </ng-container>
            </ng-container>
        </tbody>
    </table>
} @else {
    <!-- loading spinner -->
    <mat-spinner></mat-spinner>
}
