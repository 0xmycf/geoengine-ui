<geoengine-sidenav-header>{{ title }}</geoengine-sidenav-header>

@if (isSearching) {
    <mat-form-field class="search" appearance="outline" subscriptSizing="dynamic">
        <mat-icon matPrefix>search</mat-icon>
        <input
            matInput
            #searchInput
            type="text"
            placeholder="Search in collection"
            [ngModel]="searchString"
            (ngModelChange)="triggerAutocomplete($event); searchString = $event"
            [matAutocomplete]="searchAutocomplete"
        />
    </mat-form-field>
    <mat-autocomplete #searchAutocomplete="matAutocomplete">
        @for (option of autocompleteResults; track option) {
            <mat-option [value]="option">{{ option }}</mat-option>
        }
    </mat-autocomplete>

    <button mat-button class="search-settings-btn small-btn" (click)="back()" matTooltip="Search Settings" matTooltipPosition="before">
        <mat-icon>tune</mat-icon>
    </button>
} @else {
    <button
        mat-button
        class="back-btn small-btn"
        (click)="back()"
        matTooltip="Navigate Back"
        matTooltipPosition="before"
        [disabled]="selectedCollection === -1"
    >
        <mat-icon>arrow_back</mat-icon>
    </button>

    <button
        mat-button
        class="forth-btn small-btn"
        (click)="forward()"
        matTooltip="Navigate Forward"
        matTooltipPosition="before"
        [disabled]="selectedCollection === allTrails.length - 1"
    >
        <mat-icon>arrow_forward</mat-icon>
    </button>

    <div #scrollElement class="breadcrumbs">
        <button mat-stroked-button (click)="navigateToRoot()" class="root-btn small-btn"><mat-icon>layers</mat-icon></button>
        @for (item of displayedTrail; track $index) {
            <mat-icon>chevron_right</mat-icon>
            <button mat-stroked-button class="breadcrumb" (click)="onBreadCrumbClick($index)">{{ item.name }}</button>
        }
    </div>
}

@if (hasSearchCapabilities) {
    <button mat-button class="search-btn small-btn" matTooltip="Search" matTooltipPosition="before" (click)="toggleSearch()">
        <mat-icon>search</mat-icon>
    </button>
}

<!-- TODO: This is a hack for re-creating the component on changes to `collection`.
        The component, however, should be able to react on changes. -->
@for (selectedId of [selectedId]; track selectedId) {
    <geoengine-layer-collection-list
        class="portal-outlet"
        [selectListener]="selectListener()"
        [collection]="selectedId"
    ></geoengine-layer-collection-list>
}
